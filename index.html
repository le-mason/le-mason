<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>fran√ßais ‚Ä¢ formel/informel</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', system-ui, -apple-system, sans-serif;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(145deg, #f0ebe1 0%, #faf0e0 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
        }

        .app-card {
            max-width: 420px;
            width: 100%;
            background: #fffcf5f0;
            backdrop-filter: blur(4px);
            border-radius: 40px 40px 30px 30px;
            box-shadow: 0 20px 35px -8px #7a5e40, 0 0 0 1px #fad6a8 inset;
            padding: 20px 16px 26px;
            margin: 0 auto;
            transition: background-color 0.4s ease, box-shadow 0.4s ease;
        }

        .title-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 12px;
            border-bottom: 4px solid #ebc17e;
            padding-bottom: 10px;
        }

        .title-emoji {
            font-size: 2rem;
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.1));
        }

        h1 {
            font-size: 1.7rem;
            font-weight: 600;
            color: #3f2d12;
            text-align: center;
            margin: 0;
        }

        /* toggle formel/informel */
        .toggle-row {
            display: flex;
            gap: 8px;
            margin: 20px 0 16px;
            background: #f4e8d9;
            padding: 6px;
            border-radius: 60px;
            border: 2px solid #ebc287;
        }

        .toggle-option {
            flex: 1;
            background: #faf0e0;
            border: 2px solid #e2c7a3;
            color: #432f15;
            font-size: 1.3rem;
            font-weight: 600;
            padding: 10px 6px;
            border-radius: 50px;
            box-shadow: 0 3px 0 #b69160, 0 2px 6px #855e33;
            cursor: pointer;
            transition: 0.08s linear;
            text-align: center;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .toggle-option.active {
            background: #d9d0b5;
            border-color: #a5834b;
            box-shadow: 0 2px 0 #7a5e3a;
            transform: translateY(2px);
            font-weight: 700;
            color: #2f2a1a;
        }

        .toggle-option:active {
            transform: translateY(3px);
            box-shadow: 0 1px 0 #b69160;
        }

        /* main panel */
        .question-panel {
            background: #fffbf5;
            border-radius: 28px;
            padding: 18px 16px;
            margin: 6px 0 12px;
            border: 2px solid #ebc287;
            box-shadow: inset 0 2px 6px #ffe6c1;
            min-height: 240px; /* enough for three lines + translation */
            display: flex;
            flex-direction: column;
        }

        /* view selector (question / r√©ponses) */
        .view-selector {
            display: flex;
            gap: 6px;
            background: #ecdbbb;
            padding: 4px;
            border-radius: 50px;
            margin-bottom: 16px;
            border: 1px solid #caa97c;
        }

        .view-btn {
            flex: 1;
            background: #f9ebd7;
            border: 2px solid #cfb088;
            color: #4f3c1f;
            font-size: 1.1rem;
            font-weight: 600;
            padding: 8px 4px;
            border-radius: 40px;
            cursor: pointer;
            transition: 0.06s;
            text-align: center;
            box-shadow: 0 2px 0 #a8875b;
            user-select: none;
        }

        .view-btn.active {
            background: #c1a77c;
            border-color: #8a693e;
            color: white;
            box-shadow: 0 1px 0 #6b4d2c;
            transform: translateY(2px);
        }

        /* display area - fixed height to maintain 3 lines */
        .display-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 160px; /* ensures about 3 lines of question + translation */
        }

        .question-fr {
            font-size: 1.9rem;
            font-weight: 680;
            line-height: 1.3;
            color: #3e2c14;
            word-break: break-word;
            background: #fcedd7;
            padding: 16px 14px;
            border-radius: 30px;
            box-shadow: 0 4px 0 #ccaa7b;
            margin-bottom: 12px;
            min-height: 5rem; /* at least 2 lines */
            display: flex;
            align-items: center;
        }

        .english-translation {
            font-size: 1.3rem;
            color: #5f4a2e;
            text-align: center;
            font-style: italic;
            background: #fcf3e6;
            padding: 10px 12px;
            border-radius: 40px;
            border: 1px dashed #c9a87c;
            min-height: 3.2rem; /* ensures at least one line */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* responses panel */
        .responses-panel {
            background: #f5e8d4;
            border-radius: 26px;
            padding: 16px 14px;
            border: 2px solid #dbb583;
            box-shadow: inset 0 2px 8px #eedbbb;
            min-height: 160px;
            overflow-y: auto;
        }

        .responses-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #5d4a2b;
            margin-bottom: 12px;
            background: #fae3c3;
            display: inline-block;
            padding: 4px 18px;
            border-radius: 40px;
            border: 1px solid #c9a87c;
        }

        .response-item {
            font-size: 1.4rem;
            font-weight: 500;
            padding: 10px 0;
            border-bottom: 2px solid #ebd0ac;
            color: #2f2a1a;
            display: flex;
            align-items: baseline;
            gap: 12px;
        }

        .response-item:last-child {
            border-bottom: none;
        }

        .response-bullet {
            font-size: 1.4rem;
            color: #b16f3a;
            width: 30px;
            text-align: right;
        }

        .hidden {
            display: none !important;
        }

        /* audio + next row */
        .action-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 18px 0 10px;
        }

        .audio-btn {
            background: #faf0e0;
            border: 3px solid #e2c7a3;
            color: #3e2c14;
            font-size: 2rem;
            padding: 12px 18px;
            border-radius: 60px;
            box-shadow: 0 4px 0 #b69160, 0 5px 8px #855e33;
            cursor: pointer;
            transition: 0.08s linear;
            line-height: 1;
            flex-shrink: 0;
        }

        .audio-btn:active {
            transform: translateY(4px);
            box-shadow: 0 1px 0 #b69160, 0 5px 8px #7b562b;
        }

        .next-btn {
            flex: 1;
            background: #2f5e3c;
            border: 3px solid #9fcb8b;
            color: white;
            font-size: 1.4rem;
            font-weight: 600;
            padding: 14px 10px;
            border-radius: 50px;
            box-shadow: 0 5px 0 #1b3b24, 0 5px 12px #b2956e;
            cursor: pointer;
            transition: 0.08s;
            text-align: center;
        }

        .next-btn:active {
            transform: translateY(4px);
            box-shadow: 0 1px 0 #1b3b24, 0 5px 12px #b2956e;
        }
    </style>
</head>
<body>
<div class="app-card" id="appCard">
    <div class="title-container">
        <span class="title-emoji">üó£Ô∏è</span>
        <h1>fran√ßais oral</h1>
        <span class="title-emoji">üá´üá∑</span>
    </div>

    <!-- toggle formel/informel - with red cap for informel -->
    <div class="toggle-row">
        <button class="toggle-option active" id="toggleInformal">üß¢ informel</button>
        <button class="toggle-option" id="toggleFormal">üé© formel</button>
    </div>

    <!-- main panel -->
    <div class="question-panel">
        <!-- view toggle: question / r√©ponses -->
        <div class="view-selector">
            <button class="view-btn active" id="viewQuestionBtn">‚ùì question</button>
            <button class="view-btn" id="viewResponsesBtn">üí¨ r√©ponses</button>
        </div>

        <!-- question area (visible by default) - fixed height maintains 3 lines -->
        <div id="questionDisplayArea" class="display-area">
            <div class="question-fr" id="questionFr">Quel √¢ge as-tu ?</div>
            <div class="english-translation" id="questionEn">How old are you?</div>
        </div>

        <!-- responses area (hidden initially) -->
        <div id="responsesDisplayArea" class="display-area hidden">
            <div class="responses-panel">
                <div class="responses-title">üí¨ exemples de r√©ponses</div>
                <div id="responsesList"></div>
            </div>
        </div>
    </div>

    <!-- audio + next button row -->
    <div class="action-row">
        <button class="audio-btn" id="speakBtn" title="√©couter">üîä</button>
        <button class="next-btn" id="nextBtn">suivant ‚ûî</button>
    </div>
</div>

<script>
    (function() {
        // --- text-to-speech ---
        const synth = window.speechSynthesis;
        function speakFrench(text) {
            if (!synth) return;
            synth.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'fr-FR';
            utterance.rate = 0.9;
            const voices = synth.getVoices();
            const frenchVoice = voices.find(v => v.lang === 'fr-FR' || v.lang.startsWith('fr'));
            if (frenchVoice) utterance.voice = frenchVoice;
            synth.speak(utterance);
        }

        // --- question banks ---
        const questionsInformel = [
            { fr: "Quel √¢ge as-tu ?", en: "How old are you?" },
            { fr: "Quelle est ta date de naissance ?", en: "What is your birthday?" },
            { fr: "As-tu des enfants ?", en: "Do you have children?" },
            { fr: "D‚Äôo√π viens-tu ?", en: "Where are you from?" },
            { fr: "Quel est ton pays d‚Äôorigine ?", en: "What is your country of origin?" },
            { fr: "Quelles langues parles-tu ?", en: "What languages do you speak?" },
            { fr: "Comment tu t‚Äôappelles ?", en: "What is your name?" },
            { fr: "Quel est ton nom de famille ?", en: "What is your family name?" },
            { fr: "Quel est ton m√©tier ?", en: "What is your profession?" },
            { fr: "Quelle est ta nationalit√© ?", en: "What is your nationality?" },
            { fr: "Quelle est ta situation familiale ?", en: "What is your civil status?" },
            { fr: "O√π habites-tu ?", en: "Where do you live?" },
            { fr: "Quelle est ton adresse ?", en: "What is your address?" },
            { fr: "Quel est ton code postal ?", en: "What is your postal code?" },
            { fr: "Dans quelle rue habites-tu ?", en: "What street do you live on?" },
            { fr: "Quel est ton num√©ro de t√©l√©phone ?", en: "What is your telephone number?" },
            { fr: "Quelle est ton adresse courriel ?", en: "What is your email address?" }
        ];

        const questionsFormel = [
            { fr: "Quel √¢ge avez-vous ?", en: "How old are you?" },
            { fr: "Quelle est votre date de naissance ?", en: "What is your birthday?" },
            { fr: "Avez-vous des enfants ?", en: "Do you have children?" },
            { fr: "D‚Äôo√π venez-vous ?", en: "Where are you from?" },
            { fr: "Quel est votre pays d‚Äôorigine ?", en: "What is your country of origin?" },
            { fr: "Quelles langues parlez-vous ?", en: "What languages do you speak?" },
            { fr: "Comment vous appelez-vous ?", en: "What is your name?" },
            { fr: "Quel est votre nom de famille ?", en: "What is your family name?" },
            { fr: "Quel est votre m√©tier ?", en: "What is your profession?" },
            { fr: "Quelle est votre nationalit√© ?", en: "What is your nationality?" },
            { fr: "Quelle est votre situation familiale ?", en: "What is your civil status?" },
            { fr: "O√π habitez-vous ?", en: "Where do you live?" },
            { fr: "Quelle est votre adresse ?", en: "What is your address?" },
            { fr: "Quel est votre code postal ?", en: "What is your postal code?" },
            { fr: "Dans quelle rue habitez-vous ?", en: "What street do you live on?" },
            { fr: "Quel est votre num√©ro de t√©l√©phone ?", en: "What is your telephone number?" },
            { fr: "Quelle est votre adresse courriel ?", en: "What is your email address?" }
        ];

        const reponsesSample = [
            ["J‚Äôai 28 ans.", "J‚Äôai 34 ans.", "J‚Äôai 47 ans."],
            ["Le 15 mars 1995.", "Je suis n√© le 3 juillet 1988.", "C‚Äôest le 22 novembre."],
            ["Oui, j‚Äôai deux gar√ßons.", "Non, je n‚Äôai pas d‚Äôenfants.", "J‚Äôai une fille de 6 ans."],
            ["Je viens de Lyon.", "Je suis de Belgique, de Li√®ge.", "Du Maroc, de Casablanca."],
            ["Je suis originaire du S√©n√©gal.", "Mon pays d‚Äôorigine, c‚Äôest l‚ÄôItalie.", "Je viens du Mexique."],
            ["Je parle fran√ßais et anglais.", "Espagnol, fran√ßais et un peu d‚Äôitalien.", "Le portugais et le fran√ßais."],
            ["Je m‚Äôappelle Thomas.", "Moi, c‚Äôest L√©a.", "Mon pr√©nom est Nicolas."],
            ["Mon nom de famille est Moreau.", "Je m‚Äôappelle Dupont.", "C‚Äôest Lambert."],
            ["Je suis infirmier.", "Je travaille comme enseignante.", "Je suis ing√©nieur en informatique."],
            ["Je suis fran√ßaise.", "Je suis canadien.", "Nationalit√© suisse."],
            ["Je suis mari√©.", "C√©libataire.", "Je vis en couple."],
            ["J‚Äôhabite √† Paris.", "Je vis √† Bruxelles.", "√Ä Montr√©al."],
            ["12 rue de la Paix, 75002 Paris.", "5 avenue Victor Hugo.", "8 boulevard Saint-Michel."],
            ["C‚Äôest 69002.", "1000 Bruxelles.", "75005."],
            ["J‚Äôhabite rue des Lilas.", "Rue de la R√©publique.", "Sur la grand-place."],
            ["C‚Äôest le 06 12 34 56 78.", "07 98 76 54 32.", "01 44 55 66 77."],
            ["jean.dupont@courriel.fr", "marie95@courrier.fr", "pierre.legrand@service.fr"]
        ];

        // --- state ---
        let currentMode = 'informal';
        let currentIndex = 0;
        let currentView = 'question';

        // DOM
        const toggleInf = document.getElementById('toggleInformal');
        const toggleForm = document.getElementById('toggleFormal');
        const questionFr = document.getElementById('questionFr');
        const questionEn = document.getElementById('questionEn');
        const responsesList = document.getElementById('responsesList');
        const nextBtn = document.getElementById('nextBtn');
        const speakBtn = document.getElementById('speakBtn');
        const viewQuestionBtn = document.getElementById('viewQuestionBtn');
        const viewResponsesBtn = document.getElementById('viewResponsesBtn');
        const questionDisplayArea = document.getElementById('questionDisplayArea');
        const responsesDisplayArea = document.getElementById('responsesDisplayArea');

        function setView(view) {
            currentView = view;
            if (view === 'question') {
                viewQuestionBtn.classList.add('active');
                viewResponsesBtn.classList.remove('active');
                questionDisplayArea.classList.remove('hidden');
                responsesDisplayArea.classList.add('hidden');
            } else {
                viewResponsesBtn.classList.add('active');
                viewQuestionBtn.classList.remove('active');
                responsesDisplayArea.classList.remove('hidden');
                questionDisplayArea.classList.add('hidden');
                populateResponsesList();
            }
        }

        function populateResponsesList() {
            const sample = reponsesSample[currentIndex] || ["exemple a", "exemple b"];
            responsesList.innerHTML = '';
            sample.forEach(text => {
                const div = document.createElement('div');
                div.className = 'response-item';
                div.innerHTML = `<span class="response-bullet">‚Üí</span> ${text}`;
                responsesList.appendChild(div);
            });
        }

        function refreshDisplay(speak = false) {
            const qset = (currentMode === 'informal') ? questionsInformel : questionsFormel;
            const q = qset[currentIndex];
            questionFr.innerText = q.fr;
            questionEn.innerText = q.en;
            if (speak) speakFrench(q.fr);
            if (currentView === 'responses') {
                populateResponsesList();
            }
        }

        function nextQuestion() {
            const maxLen = questionsInformel.length;
            currentIndex = (currentIndex + 1) % maxLen;
            refreshDisplay(true);
            if (currentView === 'responses') {
                populateResponsesList();
            }
            document.querySelector('.app-card').classList.add('flash-green');
            setTimeout(() => document.querySelector('.app-card').classList.remove('flash-green'), 200);
        }

        // --- event listeners ---
        toggleInf.addEventListener('click', () => {
            toggleInf.classList.add('active');
            toggleForm.classList.remove('active');
            currentMode = 'informal';
            refreshDisplay(true);
            if (currentView === 'responses') populateResponsesList();
        });

        toggleForm.addEventListener('click', () => {
            toggleForm.classList.add('active');
            toggleInf.classList.remove('active');
            currentMode = 'formal';
            refreshDisplay(true);
            if (currentView === 'responses') populateResponsesList();
        });

        viewQuestionBtn.addEventListener('click', () => setView('question'));
        viewResponsesBtn.addEventListener('click', () => setView('responses'));
        nextBtn.addEventListener('click', nextQuestion);
        speakBtn.addEventListener('click', () => speakFrench(questionFr.innerText));

        // --- init ---
        (function init() {
            currentIndex = Math.floor(Math.random() * questionsInformel.length);
            refreshDisplay(true);
            setView('question');
        })();

        if (synth) synth.getVoices();
    })();
</script>
</body>
</html>
